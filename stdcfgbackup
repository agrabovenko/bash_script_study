#!/bin/bash
set -euo pipefail

if [ $# -ne 1 ]; then
  echo "Usage: $0 <dir>"
  exit 1
fi

DIR="$1"
BACKUP_DIR="$HOME/backup_conf"
DATE=$(date +%Y-%m-%d)

if [ ! -d "$DIR" ]; then
  echo "Error: $DIR is not a directory"
  exit 2
fi

mkdir -p "$BACKUP_DIR"

for cfg in "$DIR"/*.conf; do
  [ -e "$cfg" ] || continue
  cp "$cfg" "$BACKUP_DIR/$(basename "$cfg")_$DATE"
done

